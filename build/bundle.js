(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,o){for(var r=0;r<o.length;r++){var n=o[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,o){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===e(i)?i:String(i)),n)}var i}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var o,r;return o=e,(r=[{key:"identity",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"mul",value:function(e,t){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12],t[0]*e[1]+t[1]*e[5]+t[2]*e[9]+t[3]*e[13],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]+t[3]*e[14],t[0]*e[3]+t[1]*e[7]+t[2]*e[11]+t[3]*e[15],t[4]*e[0]+t[5]*e[4]+t[6]*e[8]+t[7]*e[12],t[4]*e[1]+t[5]*e[5]+t[6]*e[9]+t[7]*e[13],t[4]*e[2]+t[5]*e[6]+t[6]*e[10]+t[7]*e[14],t[4]*e[3]+t[5]*e[7]+t[6]*e[11]+t[7]*e[15],t[8]*e[0]+t[9]*e[4]+t[10]*e[8]+t[11]*e[12],t[8]*e[1]+t[9]*e[5]+t[10]*e[9]+t[11]*e[13],t[8]*e[2]+t[9]*e[6]+t[10]*e[10]+t[11]*e[14],t[8]*e[3]+t[9]*e[7]+t[10]*e[11]+t[11]*e[15],t[12]*e[0]+t[13]*e[4]+t[14]*e[8]+t[15]*e[12],t[12]*e[1]+t[13]*e[5]+t[14]*e[9]+t[15]*e[13],t[12]*e[2]+t[13]*e[6]+t[14]*e[10]+t[15]*e[14],t[12]*e[3]+t[13]*e[7]+t[14]*e[11]+t[15]*e[15]]}},{key:"translate",value:function(e,t,o){return[1,0,0,0,0,1,0,0,0,0,1,0,e,t,o,1]}},{key:"xRotate",value:function(e){var t=Math.cos(e),o=Math.sin(e);return[1,0,0,0,0,t,o,0,0,-o,t,0,0,0,0,1]}},{key:"yRotate",value:function(e){var t=Math.cos(e),o=Math.sin(e);return[t,0,-o,0,0,1,0,0,o,0,t,0,0,0,0,1]}},{key:"zRotate",value:function(e){var t=Math.cos(e),o=Math.sin(e);return[t,o,0,0,-o,t,0,0,0,0,1,0,0,0,0,1]}},{key:"scale",value:function(e,t,o){return[o,0,0,0,0,t,0,0,0,0,o,0,0,0,0,1]}}])&&t(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),e}(),r=function(e,t,o){var r=e.createShader(t);if(e.shaderSource(r,o),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;console.log(e.getShaderInfoLog(r)),e.deleteShader(r)};!function(){var e=document.getElementById("canvas"),t=e.getContext("webgl2");if(t){var n=r(t,t.VERTEX_SHADER,"#version 300 es\n\nin vec2 a_position;\n\nin vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nuniform mat4 u_matrix;\n\nout vec2 v_texCoord;\n\n\nvoid main(){\n    vec2 position = (u_matrix * vec4(a_position, 0, 1)).xy;\n\n    vec2 zeroToOne = position / u_resolution;\n\n    vec2 zeroToTwo = zeroToOne * 2.0;\n    \n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n\n    v_texCoord = a_texCoord;\n}"),i=r(t,t.FRAGMENT_SHADER,"#version 300 es\n\nprecision highp float;\n\nin vec2 v_texCoord;\n\nuniform sampler2D u_texture;\n\nout vec4 outColor;\n\nvoid main() {\n\n    outColor = texture(u_texture, v_texCoord);\n\n}"),a=function(e,t,o){var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,o),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;console.log(e.getProgramInfoLog(r)),e.deleteProgram(r)}(t,n,i),u=t.getAttribLocation(a,"a_position"),c=t.getAttribLocation(a,"a_texCoord"),p=t.getUniformLocation(a,"u_resolution"),l=t.getUniformLocation(a,"u_matrix"),f=t.getUniformLocation(a,"u_texture"),T=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,T),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,20,0,0,10,0,10,20,0,20,10]),t.STATIC_DRAW);var m=t.createVertexArray(t);t.bindVertexArray(m),t.enableVertexAttribArray(u);var x=t.FLOAT,s=0,v=t.TRIANGLES,d=6;t.vertexAttribPointer(u,2,x,!1,0,s);var y=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,y),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),t.STATIC_DRAW),t.enableVertexAttribArray(c),t.vertexAttribPointer(c,2,x,!1,0,s);var E=new o,h=S("assets/bird.png"),_=S("assets/pipe.png"),g=S("assets/pipe2.png"),R={pipeTop:{x:e.clientWidth+100,y:-400,dx:3,dy:0,scale:5,textureInfo:g},pipeBottom:{x:e.clientWidth+100,y:320,dx:3,dy:0,scale:5,textureInfo:_}},A={x:100,y:e.clientHeight/2,dx:0,dy:1,scale:10,acceleration:0,maxAcceleration:10,gravity:10,textureInfo:h};document.body.onkeyup=function(e){"Space"==e.code&&(A.acceleration=-4)},requestAnimationFrame((function o(r){var n=.001*r,i=Math.min(.1,n-b);b=n,function(t){if(r=A.x+A.textureInfo.width,n=R.pipeTop.x+R.pipeTop.textureInfo.width,r>R.pipeTop.x&&A.x<n&&A.y<R.pipeTop.y+R.pipeTop.textureInfo.height&&console.log("collision"),A.acceleration+=t*A.gravity*1.2,A.y+=A.acceleration,R.pipeTop.x-=60*R.pipeTop.dx*t,R.pipeBottom.x-=60*R.pipeBottom.dx*t,R.pipeTop.x<=-50){var o=Math.floor(301*Math.random())-150;R.pipeBottom.y<200&&(o=150),R.pipeBottom.y>e.clientHeight-200&&(o=-150),R.pipeTop.y+=o,R.pipeBottom.y+=o,R.pipeTop.x=e.clientWidth+100,R.pipeBottom.x=e.clientWidth+100}var r,n}(i),t.viewport(0,0,e.clientWidth,e.clientHeight),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),I(R.pipeTop.textureInfo.texture,R.pipeTop.textureInfo.width,R.pipeTop.textureInfo.height,R.pipeTop.x,R.pipeTop.y,R.pipeTop.scale),I(R.pipeBottom.textureInfo.texture,R.pipeBottom.textureInfo.width,R.pipeBottom.textureInfo.height,R.pipeBottom.x,R.pipeBottom.y,R.pipeBottom.scale),I(A.textureInfo.texture,A.textureInfo.width,A.textureInfo.height,A.x,A.y,A.scale),requestAnimationFrame(o)}));var b=0}else console.log("Web GL 2 is not supported!");function S(e){var o=t.createTexture();t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);var r={width:1,height:1,texture:o},n=new Image;return n.crossOrigin="anonymous",n.addEventListener("load",(function(){r.width=n.width,r.height=n.height,t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)})),n.src=e,r}function I(o,r,n,i,u,c){t.useProgram(a),t.uniform1i(f,0),t.activeTexture(t.TEXTURE0+0),t.bindTexture(t.TEXTURE_2D,o);var T=E.translate(i,u,0),m=E.xRotate(0),x=E.yRotate(0),y=E.zRotate(0),h=E.scale(r,n/c,1),_=E.identity();_=E.mul(_,T),_=E.mul(_,m),_=E.mul(_,x),_=E.mul(_,y),_=E.mul(_,h),t.uniform2f(p,e.clientWidth,e.clientHeight),t.uniformMatrix4fv(l,!1,_),t.drawArrays(v,s,d)}}()})();